name: PR Open

on:
  pull_request:
    paths-ignore:
      - '**/*.md'

jobs:
  deployment:
    name: setup
    runs-on: ubuntu-latest
    if: github.event.pull_request.draft == false
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Discovery
        run: |
          mkdir "${HOME}/.npm-packages"
          npm config set prefix "${HOME}/.npm-packages"
          export NPM_PACKAGES="${HOME}/.npm-packages"
          export PATH="$PATH:$NPM_PACKAGES/bin"
          export MANPATH="${MANPATH-$(manpath)}:$NPM_PACKAGES/share/man"
          node --version
          npm install -g insomnia-inso
      - name: Test Inso
        run: |
          export PATH="$PATH:${HOME}/.npm-packages/bin"
          inso --version
